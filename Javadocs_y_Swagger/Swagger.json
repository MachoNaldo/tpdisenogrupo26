{"openapi":"3.0.1","info":{"title":"API Hotel Grupo 26","description":"Documentación del TP de Diseño","version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Gestión de Huéspedes","description":"ABM de huéspedes y búsqueda multicriterio"},{"name":"Gestión de Habitaciones","description":"Consultas de disponibilidad y listado de habitaciones"},{"name":"Gestión de Responsables de Pago","description":"Administración de titulares para la facturación"},{"name":"Gestión de Estadías","description":"Operaciones para registrar ocupación y facturación"},{"name":"Gestión de Usuarios","description":"Operaciones de autenticación y gestión de sesiones"},{"name":"Gestión de Reservas","description":"Creación, búsqueda y cancelación de reservas futuras"},{"name":"Gestión de Facturas","description":"Creación y consulta de comprobantes de pago"},{"name":"Búsqueda de Personas","description":"Servicio auxiliar para buscar datos de personas por identificadores fiscales"}],"paths":{"/api/huespedes/{id}":{"get":{"tags":["Gestión de Huéspedes"],"summary":"Obtener huésped por ID","description":"Recupera datos completos de un huésped.","operationId":"obtenerPorId","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Huésped encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HuespedDTO"}}}},"404":{"description":"No encontrado","content":{"application/hal+json":{"schema":{"type":"object"}}}}}},"put":{"tags":["Gestión de Huéspedes"],"summary":"Actualizar Huésped completo","description":"Reemplaza los datos del huésped.","operationId":"actualizarHuesped","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HuespedDTO"}}},"required":true},"responses":{"200":{"description":"Actualizado exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HuespedDTO"}}}},"404":{"description":"No encontrado","content":{"application/hal+json":{"schema":{"type":"object"}}}}}},"patch":{"tags":["Gestión de Huéspedes"],"summary":"Actualizar datos fiscales","description":"Modifica el CUIT y la Condición Fiscal de un huésped existente.","operationId":"actualizarCuitCondicionFiscal","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActualizarCuitCondicionFiscalDTO"}}},"required":true},"responses":{"400":{"description":"Datos inválidos en el DTO","content":{"application/hal+json":{"schema":{"type":"object"}}}},"200":{"description":"Datos actualizados correctamente","content":{"application/hal+json":{"schema":{"type":"object"}}}},"500":{"description":"Error interno al actualizar","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/logout":{"post":{"tags":["Gestión de Usuarios"],"summary":"Cerrar sesión","description":"Invalida la sesión actual.","operationId":"logout","responses":{"200":{"description":"Sesión cerrada correctamente.","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/login":{"post":{"tags":["Gestión de Usuarios"],"summary":"Iniciar sesión","description":"Valida credenciales y crea una sesión HTTP.","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Usuario"}}},"required":true},"responses":{"400":{"description":"Usuario o contraseña incorrectos.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"200":{"description":"Login exitoso.","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/api/responsablespago/crear":{"post":{"tags":["Gestión de Responsables de Pago"],"summary":"Crear responsable de pago","description":"Registra una entidad o persona para facturar.","operationId":"crear","parameters":[{"name":"forzar","in":"query","description":"Permite duplicados si es true","required":false,"schema":{"type":"boolean","default":false}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponsablePagoDTO"}}},"required":true},"responses":{"201":{"description":"Responsable creado exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponsablePagoDTO"}}}},"409":{"description":"El documento/CUIT ya está registrado","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/api/reservas":{"get":{"tags":["Gestión de Reservas"],"summary":"Consultar reservas por habitación","description":"Devuelve las reservas de una habitación específica en un rango de fechas.","operationId":"obtenerReserva","parameters":[{"name":"numeroHabitacion","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"fechaInicio","in":"query","required":true,"schema":{"type":"string","format":"date"}},{"name":"fechaFin","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"Listado obtenido correctamente","content":{"application/hal+json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReservaDTO"}}}}}}},"post":{"tags":["Gestión de Reservas"],"summary":"Crear nueva reserva","description":"Genera una reserva validando disponibilidad.","operationId":"crearReserva","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservaDTO"}}},"required":true},"responses":{"201":{"description":"Reserva creada exitosamente.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservaDTO"}}}},"409":{"description":"La habitación no está disponible en esas fechas.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"500":{"description":"Error interno del servidor.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"400":{"description":"Datos inválidos.","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/api/huespedes/validar-documento":{"post":{"tags":["Gestión de Huéspedes"],"summary":"Validar si existe documento","description":"Devuelve true si el documento ya está registrado.","operationId":"validarDocumento","parameters":[{"name":"tipoDocumento","in":"query","required":true,"schema":{"type":"string","enum":["DNI","LE","LC","PASAPORTE","OTRO"]}},{"name":"documentacion","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Consulta exitosa","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/api/huespedes/crearhuesped":{"post":{"tags":["Gestión de Huéspedes"],"summary":"Crear nuevo huésped","description":"Registra un cliente. Si el DNI ya existe, devuelve 409 salvo que forzar=true.","operationId":"agregarHuesped","parameters":[{"name":"forzar","in":"query","description":"Permite duplicados si es true","required":false,"schema":{"type":"boolean","default":false}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HuespedDTO"}}},"required":true},"responses":{"201":{"description":"Huésped creado exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HuespedDTO"}}}},"409":{"description":"El documento ya está registrado","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/api/facturas/crear":{"post":{"tags":["Gestión de Facturas"],"summary":"Generar nueva factura","description":"Crea una factura para una estadía finalizada o servicios.","operationId":"crearFactura","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CrearFacturaRequest"}}},"required":true},"responses":{"500":{"description":"Error interno del servidor.","content":{"application/hal+json":{"schema":{"$ref":"#/components/schemas/FacturaDTO"}}}},"400":{"description":"Datos inválidos o error de negocio.","content":{"application/hal+json":{"schema":{"$ref":"#/components/schemas/FacturaDTO"}}}},"201":{"description":"Factura generada exitosamente.","content":{"application/hal+json":{"schema":{"$ref":"#/components/schemas/FacturaDTO"}}}}}}},"/api/estadias/ocupar":{"post":{"tags":["Gestión de Estadías"],"summary":"Registrar Ocupación (Check-in)","description":"Crea la estadía. Usa 'forzar=true' para ignorar solapamiento y ocupar la habitación de igual forma.","operationId":"crear_1","parameters":[{"name":"forzar","in":"query","required":false,"schema":{"type":"boolean","default":false}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EstadiaDTO"}}},"required":true},"responses":{"201":{"description":"Estadía creada exitosamente.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EstadiaDTO"}}}},"500":{"description":"Error interno del servidor.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"409":{"description":"La habitación ya está ocupada.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"400":{"description":"Datos inválidos.","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/revisar-sesion":{"get":{"tags":["Gestión de Usuarios"],"summary":"Verificar sesión activa","description":"Comprueba si el usuario tiene una sesión válida.","operationId":"checkSession","responses":{"200":{"description":"Usuario autenticado.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"401":{"description":"No hay sesión activa.","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/api/responsablespago/buscar-por-cuit":{"get":{"tags":["Gestión de Responsables de Pago"],"summary":"Buscar por CUIT","description":"Busca un responsable de pago activo por su CUIT.","operationId":"buscarPorCuit","parameters":[{"name":"cuit","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"No existe responsable con ese CUIT.","content":{"application/hal+json":{"schema":{"$ref":"#/components/schemas/ResponsablePagoDTO"}}}},"200":{"description":"Encontrado.","content":{"application/hal+json":{"schema":{"$ref":"#/components/schemas/ResponsablePagoDTO"}}}}}}},"/api/reservas/buscar":{"get":{"tags":["Gestión de Reservas"],"summary":"Buscar reservas por cliente","description":"Filtra reservas por nombre o apellido del titular.","operationId":"buscarReserva","parameters":[{"name":"apellido","in":"query","required":false,"schema":{"type":"string"}},{"name":"nombres","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Búsqueda exitosa","content":{"application/hal+json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReservaDTO"}}}}}}}},"/api/personas/buscar-por-cuit":{"get":{"tags":["Búsqueda de Personas"],"summary":"Buscar por CUIT","description":"Recupera los datos básicos de una persona dado su CUIT/CUIL.","operationId":"buscarPorCuit_1","parameters":[{"name":"cuit","in":"query","description":"CUIT/CUIL sin guiones o con guiones","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"Error interno del servidor.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"404":{"description":"No existe ninguna persona con ese CUIT.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"200":{"description":"Persona encontrada.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PersonaBusquedaDTO"}}}}}}},"/api/huespedes/buscar":{"get":{"tags":["Gestión de Huéspedes"],"summary":"Buscar huéspedes","description":"Filtra por nombre, apellido, tipo o nro documento. Si no envías nada, lista todos.","operationId":"buscarHuespedes","parameters":[{"name":"apellido","in":"query","required":false,"schema":{"type":"string"}},{"name":"nombres","in":"query","required":false,"schema":{"type":"string"}},{"name":"tipoDocumento","in":"query","required":false,"schema":{"type":"string","enum":["DNI","LE","LC","PASAPORTE","OTRO"]}},{"name":"documentacion","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Búsqueda exitosa","content":{"application/hal+json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/HuespedDTO"}}}}}}}},"/api/huespedes/buscar-por-cuit":{"get":{"tags":["Gestión de Huéspedes"],"summary":"Buscar por CUIT","description":"Busca un huésped específico por su número de CUIT.","operationId":"buscarPorCuit_2","parameters":[{"name":"cuit","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"No existe huésped con ese CUIT","content":{"application/hal+json":{"schema":{"type":"object"}}}},"200":{"description":"Huésped encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HuespedDTO"}}}}}}},"/api/habitaciones":{"get":{"tags":["Gestión de Habitaciones"],"summary":"Listar todas las habitaciones","description":"Devuelve una lista con los números de todas las habitaciones registradas.","operationId":"obtenerTodas","responses":{"200":{"description":"Operación exitosa","content":{"application/hal+json":{"schema":{"type":"array","items":{"type":"integer","format":"int64"}}}}}}}},"/api/habitaciones/{numero}/existe":{"get":{"tags":["Gestión de Habitaciones"],"summary":"Verificar existencia de habitación","description":"Devuelve true si el número de habitación existe en la base de datos.","operationId":"verificarExistencia","parameters":[{"name":"numero","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Consulta exitosa","content":{"application/hal+json":{"schema":{"type":"boolean"}}}}}}},"/api/habitaciones/disponibilidad":{"get":{"tags":["Gestión de Habitaciones"],"summary":"Consultar disponibilidad por fechas","description":"Devuelve qué habitaciones están libres u ocupadas en un rango.","operationId":"disponibilidad","parameters":[{"name":"desde","in":"query","required":true,"schema":{"type":"string"}},{"name":"hasta","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Lista devuelta correctamente.","content":{"application/hal+json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DisponibilidadDTO"}}}}},"400":{"description":"Formato de fecha inválido.","content":{"application/hal+json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DisponibilidadDTO"}}}}}}}},"/api/facturas/{id}":{"get":{"tags":["Gestión de Facturas"],"summary":"Obtener factura por ID","description":"Busca el detalle completo de una factura emitida.","operationId":"obtenerFactura","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Factura no encontrada.","content":{"application/hal+json":{"schema":{"$ref":"#/components/schemas/FacturaDTO"}}}},"200":{"description":"Factura encontrada.","content":{"application/hal+json":{"schema":{"$ref":"#/components/schemas/FacturaDTO"}}}}}}},"/api/estadias/facturar/buscar":{"get":{"tags":["Gestión de Estadías"],"summary":"Buscar estadía para facturar","description":"Busca una estadía activa por habitación y fecha. Si la fecha es anterior al checkout, la ajusta.","operationId":"buscarEstadiaParaFacturar","parameters":[{"name":"habitacion","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"fecha","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"404":{"description":"No se encontró estadía en esa habitación para esa fecha","content":{"application/hal+json":{"schema":{"$ref":"#/components/schemas/EstadiaFacturaDTO"}}}},"200":{"description":"Estadía encontrada","content":{"application/hal+json":{"schema":{"$ref":"#/components/schemas/EstadiaFacturaDTO"}}}}}}},"/api/reservas/{id}":{"delete":{"tags":["Gestión de Reservas"],"summary":"Cancelar reserva","description":"Elimina la reserva del sistema.","operationId":"cancelar","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Reserva cancelada."},"404":{"description":"ID de reserva no encontrado."}}}},"/api/huespedes/eliminar/{id}":{"delete":{"tags":["Gestión de Huéspedes"],"summary":"Eliminar un huésped","description":"Borra físicamente al huésped de la base de datos por su ID.","operationId":"eliminar","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Eliminado correctamente.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"500":{"description":"Error interno del servidor.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"409":{"description":"No se puede eliminar: El huésped tiene reservas activas.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"404":{"description":"ID de huésped no encontrado.","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}},"/api/huespedes/eliminar-por-cuit":{"delete":{"tags":["Gestión de Huéspedes"],"summary":"Eliminar por CUIT","description":"Elimina un huésped buscando por su CUIT.","operationId":"eliminarPorCuit","parameters":[{"name":"cuit","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Eliminado correctamente.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"404":{"description":"Huésped no encontrado.","content":{"application/hal+json":{"schema":{"type":"object"}}}},"409":{"description":"No se puede eliminar (tiene reservas).","content":{"application/hal+json":{"schema":{"type":"object"}}}}}}}},"components":{"schemas":{"Usuario":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nombre":{"type":"string"},"contra":{"type":"string"}}},"DireccionDTO":{"type":"object","properties":{"codPostal":{"type":"string"},"departamento":{"type":"string"},"localidad":{"type":"string"},"nombreCalle":{"type":"string"},"numCalle":{"type":"integer","format":"int32"},"pais":{"type":"string"},"piso":{"type":"string"},"provincia":{"type":"string"}}},"HuespedDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"apellido":{"type":"string"},"condicionFiscal":{"type":"string"},"cuit":{"type":"string"},"direccion":{"$ref":"#/components/schemas/DireccionDTO"},"documentacion":{"type":"string"},"email":{"type":"string"},"fechaNacimiento":{"type":"string","format":"date"},"nacionalidad":{"type":"string"},"nombres":{"type":"string"},"ocupacion":{"type":"string"},"sexo":{"type":"string"},"telefono":{"type":"string"},"tipoDocumento":{"type":"string"},"edad":{"type":"integer","format":"int32"}}},"ResponsablePagoDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"cuit":{"type":"string"},"razonSocial":{"type":"string"},"direccion":{"$ref":"#/components/schemas/DireccionDTO"},"telefono":{"type":"string"},"nacionalidad":{"type":"string"}}},"ClienteDTO":{"type":"object","properties":{"nombre":{"type":"string"},"apellido":{"type":"string"},"telefono":{"type":"string"}}},"HabitacionReservaDTO":{"type":"object","properties":{"idReserva":{"type":"integer","format":"int64"},"numeroHabitacion":{"type":"integer","format":"int64"},"tipo":{"type":"string"},"fechaInicio":{"type":"string"},"fechaFin":{"type":"string"}}},"ReservaDTO":{"type":"object","properties":{"cliente":{"$ref":"#/components/schemas/ClienteDTO"},"reservas":{"type":"array","items":{"$ref":"#/components/schemas/HabitacionReservaDTO"}}}},"CrearFacturaRequest":{"type":"object","properties":{"estadiaId":{"type":"integer","format":"int64"},"personaId":{"type":"integer","format":"int64"},"incluirEstadia":{"type":"boolean"},"incluirConsumos":{"type":"boolean"}}},"DetalleFacturaDTO":{"type":"object","properties":{"concepto":{"type":"string"},"cantidad":{"type":"integer","format":"int32"},"precioUnitario":{"type":"number","format":"double"},"subtotal":{"type":"number","format":"double"}}},"EstadiaSimpleDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"numeroHabitacion":{"type":"integer","format":"int64"},"fechaCheckIn":{"type":"string","format":"date"},"fechaCheckOut":{"type":"string","format":"date"}}},"FacturaDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"numero":{"type":"integer","format":"int32"},"importeTotal":{"type":"number","format":"double"},"estado":{"type":"string"},"fechaConfeccion":{"type":"string","format":"date"},"importeNeto":{"type":"number","format":"double"},"iva":{"type":"number","format":"double"},"tipoFactura":{"type":"string"},"responsablePago":{"$ref":"#/components/schemas/ResponsablePagoSimpleDTO"},"estadia":{"$ref":"#/components/schemas/EstadiaSimpleDTO"},"detalles":{"type":"array","items":{"$ref":"#/components/schemas/DetalleFacturaDTO"}}}},"ResponsablePagoSimpleDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"razonSocial":{"type":"string"},"cuit":{"type":"string"}}},"EstadiaDTO":{"type":"object","properties":{"estadias":{"type":"array","items":{"$ref":"#/components/schemas/HabitacionOcuparDTO"}}}},"HabitacionOcuparDTO":{"type":"object","properties":{"numeroHabitacion":{"type":"integer","format":"int32"},"fechaInicio":{"type":"string"},"fechaFin":{"type":"string"},"huespedPrincipal":{"$ref":"#/components/schemas/HuespedDTO"},"acompanantes":{"type":"array","items":{"$ref":"#/components/schemas/HuespedDTO"}}}},"ActualizarCuitCondicionFiscalDTO":{"type":"object","properties":{"cuit":{"type":"string"},"condicionFiscal":{"type":"string","enum":["CONSUMIDOR_FINAL","MONOTRIBUTISTA","RESPONSABLE_INSCRIPTO"]}}},"PersonaBusquedaDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"cuit":{"type":"string"},"tipo":{"type":"string"},"nombres":{"type":"string"},"apellido":{"type":"string"},"documentacion":{"type":"string"},"razonSocial":{"type":"string"},"direccion":{"type":"string"},"telefono":{"type":"string"},"nacionalidad":{"type":"string"}}},"DisponibilidadDTO":{"type":"object","properties":{"numeroHabitacion":{"type":"integer","format":"int64"},"tipoHabitacion":{"type":"string"},"estados":{"type":"object","additionalProperties":{"type":"string"}}}},"EstadiaFacturaDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"fechaCheckIn":{"type":"string"},"fechaCheckOut":{"type":"string"},"cantidadNoches":{"type":"integer","format":"int32"},"precioTotal":{"type":"number","format":"double"},"habitacion":{"$ref":"#/components/schemas/HabitacionFacturaDTO"},"huespedPrincipal":{"$ref":"#/components/schemas/HuespedDTO"},"acompanantes":{"type":"array","items":{"$ref":"#/components/schemas/HuespedDTO"}}}},"HabitacionFacturaDTO":{"type":"object","properties":{"numero":{"type":"integer","format":"int64"},"tipo":{"type":"string"},"precioPorNoche":{"type":"number","format":"double"}}}}}}